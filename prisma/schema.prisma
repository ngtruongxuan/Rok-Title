// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Governor {
  id                  Int            @id @default(autoincrement())
  kingdom             String         @default("")
  governor_id         String         @unique
  governor_name       String
  alliance_name       String
  power               BigInt         @default(0)
  kill_point          BigInt         @default(0)
  t1_kill             BigInt         @default(0)
  t2_kill             BigInt         @default(0)
  t3_kill             BigInt         @default(0)
  t4_kill             BigInt         @default(0)
  t5_kill             BigInt         @default(0)
  dead                BigInt         @default(0)
  resource_assistance BigInt         @default(0)
  resource_gathered   BigInt         @default(0)
  alliance_help       BigInt         @default(0)
  created_at          String
  updated_at          String
  governorKPI         GovernorKPI?
  governorLink        GovernorLink[]

  @@map("governor")
}

model GovernorKPI {
  id                 Int      @id @default(autoincrement())
  governor           Governor @relation(fields: [governor_id], references: [governor_id])
  governor_id        String   @unique
  power_dif          BigInt   @default(0)
  t1_kill_dif        BigInt   @default(0)
  t2_kill_dif        BigInt   @default(0)
  t3_kill_dif        BigInt   @default(0)
  t4_kill_dif        BigInt   @default(0)
  t5_kill_dif        BigInt   @default(0)
  dead_dif           BigInt   @default(0)
  res_assistance_dif BigInt   @default(0)
  gather_dif         BigInt   @default(0)
  help_dif           BigInt   @default(0)
  date_scan          String
  created_at         String
  updated_at         String

  @@map("governor_kpi")
}

model GovernorLink {
  id              Int      @id @default(autoincrement())
  discord_user_id String   @unique
  governor        Governor @relation(fields: [governor_id], references: [governor_id])
  governor_id     String   @unique
  governor_type   String
  created_at      String
  updated_at      String

  @@map("governor_link")
}

model TitleConf {
  id         Int     @id @default(autoincrement())
  title      String  @unique
  locked     Boolean
  ttl        BigInt
  created_at String
  updated_at String

  @@map("title_conf")
}

model TitleRequest {
  id              Int    @id @default(autoincrement())
  discord_user_id BigInt
  kingdom         String
  x               BigInt
  y               BigInt
  created_at      String
  updated_at      String

  @@map("title_request")
}

model GovernorTracking {
  id                  Int    @id @unique @default(autoincrement())
  kingdom             String @default("")
  governor_id         String
  governor_name       String
  alliance_name       String
  power               BigInt @default(0)
  kill_point          BigInt @default(0)
  t1_kill             BigInt @default(0)
  t2_kill             BigInt @default(0)
  t3_kill             BigInt @default(0)
  t4_kill             BigInt @default(0)
  t5_kill             BigInt @default(0)
  dead                BigInt @default(0)
  resource_assistance BigInt @default(0)
  resource_gathered   BigInt @default(0)
  alliance_help       BigInt @default(0)
  date_scan           String
  created_at          String
  updated_at          String

  @@unique([governor_id, date_scan])
  @@map("governor_tracking")
}

model GovernorFarm {
  id                  Int    @id @unique @default(autoincrement())
  discord_user_id     String
  governor_id         String
  farm_id             String
  farm_name           String
  alliance_name       String
  power               BigInt @default(0)
  kill_point          BigInt @default(0)
  t1_kill             BigInt @default(0)
  t2_kill             BigInt @default(0)
  t3_kill             BigInt @default(0)
  t4_kill             BigInt @default(0)
  t5_kill             BigInt @default(0)
  t1_dead             BigInt @default(0)
  t2_dead             BigInt @default(0)
  t3_dead             BigInt @default(0)
  t4_dead             BigInt @default(0)
  t5_dead             BigInt @default(0)
  dead                BigInt @default(0)
  resource_assistance BigInt @default(0)
  date_scan           String
  created_at          String
  updated_at          String

  @@unique([governor_id, farm_id])
  @@map("governor_farm")
}

model kpi {
  id             Int    @id @default(autoincrement())
  cd             String @unique
  power_from     BigInt
  power_to       BigInt
  kp_min         BigInt
  kp_target      BigInt
  power_loss_min BigInt
  power_loss     BigInt
  dead           BigInt
  // @@unique([kpi_cd])
}
